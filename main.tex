\documentclass[12pt,twoside,openright,a4paper]{book}
\usepackage{graphicx}
\usepackage{asymptote}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{makeidx}
\usepackage{hyperref}
\usepackage{framed}
\makeindex

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{conjecture}{Conjecture}[chapter]
\newcommand{\col}{\text{col}}
\newcommand{\initch}{\text{ch}_0}
\newcommand{\finch}{\text{ch}}
\newcommand{\GG}{\mathcal{G}}

\begin{asydef}
unitsize(10mm);

void vertex(pair a, pen barva=white)
{
  filldraw(circle (a, 0.1), fillpen=barva);
}

void outnbrs(pair a, real d, int n)
{
  if (n == 0)
    return;

  if (n == 1)
    {
      draw(a--(a+0.3dir(d)));
      return;
    }

  int i;
  for (i = 0; i < n; ++i)
    draw(a -- (a + 0.3dir((d-25)+50i/(n-1))));
}

pair v[];
int i,j;
\end{asydef}

\begin{document}
\pagestyle{empty}
\begin{titlepage}

\begin{center}

\vspace{10cm}

{\large\bf A Coloring Book}

\end{center}
\end{titlepage}

\newpage

\pagestyle{plain}
\pagenumbering{roman}
\tableofcontents

\newpage

\pagestyle{headings}
\pagenumbering{arabic}
\setcounter{page}{1}

\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}

\section{Scope of the book}

(sparse graphs, vertex coloring), target audience (PhD level,
familiarity with graph theory and basic coloring results expected, otherwise self-contained).

\section{Basic definitions and notation}

% claims: A, B, C, ... local
% labels: "lemma:zzz", "thm:zzz"
% numbered definitions only for important concepts

Notation for number of vertices/edges/faces of a graph $G$:
$|V(G)|$, $|E(G)|$, $|F(G)|$.  Use $n$ and $m$ for vertices and edges when repeated.
Graphs have no loops or parallel edges by default, multigraphs may have parallel edges but still no loops.

Colorings: $\varphi$, $\psi$, \ldots

List coloring.

$[k]=\{1,\ldots,k\}$.

$P_k$ denotes a path on $k$ vertices, its length is $k-1$.

$C_k$ denotes a cycle on $k$ vertices, its length is $k$.  Length of a cycle $C$ is denoted by $|C|$.

Girth (no special notation)?

Graphs on surfaces: genus (Euler by default), representativity and edge-width, contractible and
noncontractible curves (separating vs non-separating, one-sided vs two-sided).

Planar vs plane graphs.

Face of an embedded graph $G$ is a maximal connected subset of the surface minus $G$.
A face is \emph{$2$-cell} if it is homeomorphic to an open disk, \emph{closed $2$-cell}
if additionally bounded by a cycle.  Embedding is $2$-cell if all faces are $2$-cell.
\emph{Facial walk} of $f$ is a closed walk in $G$ tracing
a component of the boundary of $f$, the length $|f|$ of $f$ is the sum of lengths of its facial
walks.

Surfaces: $\Sigma$, $\Pi$; Euler genus $g(\Sigma)$.

Other notation (to be moved to where it becomes relevant).

critical for $k$-coloring/$k$-list-coloring

list chromatic number, $k$-list-colorable

If $G$ is $H$-critical,then $G\neq H$.

$\initch$ for initial charge, $\finch$ for final charge.  Discharging to non-negative.

(maximum) average degree/degeneracy/coloring number

\section{Basic results on graph coloring}

We assume throughout the book that the reader has a previous knowledge of some basic facts
about graph coloring, which we summarize here.  Hence, we state them with not much exposition;
more information can generally be found in any basic graph theory textbook.
Where possible, we will also give pointers to sections of this book where the results are
studied in more depth.

\subsection{Greedy coloring, degeneracy, and maximum degree}

\emph{Greedy coloring} is a very basic technique how to color a graph: fix some ordering $v_1$, \ldots, $v_n$ of
vertices of the graph.  Then assign colors to vertices in order. When coloring the vertex $v_i$ for some $i\in[n]$,
choose a color not appearing on any preceding neighbors of $v_i$ and use it to color $v_i$.  If all possible colors
appeared on these neighbors, the procedure would fail; this is usually guaranteed not to happen in the situations where
we use greedy coloring for a carefully specified ordering of vertices.  Note that this technique can also be used for list coloring.
Furthermore, it can be used to extend a precoloring of a part of the graph---if an induced subgraph $H$ of a graph $G$ was given
a coloring, we can fix some ordering of $V(G)\setminus V(H)$ and assign colors in order, so that the colors are different
from the colors of the adjacent vertices of $V(H)$ as well as preceding adjacent vertices of $V(G)\setminus V(H)$.

Greedy coloring can naturally be applied to the ordering that defines degeneracy of a graph, giving the following result.
\begin{lemma}\label{lemma:degen}
Every $d$-degenerate graph has choosability (as well as chromatic number) at most $d+1$; i.e., $\chi(G)\le\chi_l(G)\le \col(G)$.
\end{lemma}

Clearly, this also implies that a graph of maximum degree at most $\Delta$ has chromatic number
at most $\Delta+1$.  Brooks~\cite{brooks1941colouring} proved that this bound can be improved, the only exceptions
being odd cycles and complete graphs.  We will frequently use the following strengthening of Brooks' theorem
in the list coloring setting~\cite{galfor}.
\begin{lemma}\label{lemma:gallai1}
Let $G$ be a $2$-connected graph and let $L$ be a list assignment for $G$ such that $|L(v)|\ge \deg(v)$ for all $v\in V(G)$.
If $G$ is neither an odd cycle nor a complete graph, then $G$ is $L$-colorable.
\end{lemma}
For even more general version of this claim, see Subsection~\ref{ssec-gallai}.

Lemma~\ref{lemma:gallai1} is most often used to extend a precoloring of a part of a graph.
Let $G$ be a graph with a list assignment $L$ and let $H$ be an induced subgraph of $G$ with an $L$-coloring $\psi$.
Let $L'$ be an assignment of lists to vertices of $V(G)\setminus V(H)$ such that $L'(v)=L(v)\setminus \{\psi(u):u\in V(H),uv\in E(G)\}$,
i.e., $L'(v)$ is obtained from $L(v)$ by removing the colors of its neighbors in $H$.  Clearly, $\psi$ extends to an $L$-coloring of $G$
if and only if the subgraph $J$ of $G$ induced by $V(G)\setminus V(H)$ is $L'$-colorable.  Note that if $|L(v)|\ge \deg_G v$, then
$|L'(v)|\ge \deg_J(G)$.  Hence, Lemma~\ref{lemma:gallai1} gives the following.
\begin{corollary}\label{cor:gallai1}
Let $G$ be a graph and let $J$ be its $2$-connected induced subgraph.  Let $L$ be a list assignment for $G$ such that $|L(v)|\ge \deg_G v$ for all $v\in V(J)$.
If $J$ is neither an odd cycle nor a complete graph, then every precoloring of $G-V(J)$ extends to an $L$-coloring of $G$.
\end{corollary}
Of course, this corollary can be applied even for ordinary coloring, by giving all vertices the same list.

\subsection{Planar graphs and graphs on surfaces}

A large body of work in graph coloring theory is devoted to the chromatic properties of planar graphs.
Since planar graphs are $5$-degenerate, they have chromatic number at most $6$ by Lemma~\ref{lemma:degen}.
The bound can be fairly easily improved to $5$, but of course the most important result in this context is
Four Color Theorem.

\begin{theorem}[Four Color Theorem]
Every planar graph is $4$-colorable.
\end{theorem}

A result of Gr\"{o}tzsch concerning triangle-free planar graphs has been also similarly influential.
\begin{theorem}[Gr\"{o}tzsch' Theorem]
Every planar triangle-free graph is $3$-colorable.
\end{theorem}
Unlike Four Color Theorem, Gr\"{o}tzsch' Theorem has many proofs based on diverse ideas, all of them non-trivial but also
relatively simple and educational; we will use several of them to demonstrate various coloring methods.

The wealth of results regarding planar graphs motivated the study of graphs drawn on other surfaces.
Heawood's formula giving an upper bound for their chromatic number is probably the best known result in this area.
\begin{theorem}[Heawood's formula]
Every graph drawn in a surface $\Sigma$ of genus $g$ has chromatic number at most
$$\Bigl\lfloor\frac{7+\sqrt{24g+1}}{2}\Bigr\rfloor.$$
\end{theorem}
This bound is tight for all surfaces except for the Klein bottle, for which the tight upper bound is $6$.

\part{Standard Methods}

Overview of Standard Methods (with examples and comments on common tricks and pitfalls).

\chapter{Reducible Configurations and Discharging}

% ZD
Suppose we want to show that graphs from some hereditary class $\GG$ are $k$-colorable.  Clearly, we can
restrict our attention to graphs from $\GG$ of minimum degree at least $k$: if a graph $G\in \GG$
contains a vertex $v$ of degree less than $k$, it suffices to find a $k$-coloring of the graph $G-v$
which also belongs to $\GG$, and then give $v$ a color different from the colors of its neighbors,
which is always available since $v$ has less than $k$ neighbors.

More formally, we are constructing a proof by contradiction.  Suppose that $G$ is a graph belonging to $\GG$
with the smallest number of vertices that is not $k$-coloriable.  Hence, $G$ is a hypothetical smallest counterexample
to the claim that all graphs from $\GG$ are $k$-colorable.
By the previous paragraph, we see that $G$ does not contain a vertex of degree at most $k-1$.
Substructures with the property that they cannot appear in any smallest counterexample
are called \emph{reducible configurations}, and they form a basis of many arguments in graph coloring.

In the most direct application, we can be able to identify a set of reducible configurations such that
at least one of them must necessarily appear in any graph from $\GG$, thus excluding the existence of
a (smallest) counterexample and showing that indeed, all graphs from $\GG$ are $k$-colorable.
In more advanced applications, reducible configurations can be used to restrict the properties
of the smallest counterexample, and a contradiction is obtained by different means afterwards, typically
by showing through another method that all graphs satisfying these restrictions are $k$-colorable.

There are many tricks used in showing that a configuration is reducible, which we will discuss some
of them throughout this chapter and elsewhere in the book. However, the basic idea almost always resembles
our starting example: the configuration is removed (and possibly some further local changes are
performed in the graph), and then a coloring of the modified graph is transformed in a coloring of the
original graph.  Reducible configurations usually involve vertices whose degree is
smaller than or close to the number of colors $k$ we are using, since a coloring of the rest of the graph
can be extended to such vertices (nearly) greedily.

Consequently, reducible configurations are easiest to find in graph classes $\GG$ that are sparse, in the
sense that the graphs in $\GG$ have average degree close to $k$. To prove that each graph in such a class $\GG$
contains one of the reducible configurations, one needs to argue that their absence would force the graph to be
too dense.  The \emph{discharging method} is a systematic way to organize such an argument.  In the most straightforward
form, a real number called \emph{charge} is assigned to vertices (and in the case of embedded graphs, possibly faces)
of the graph, so that the sum of the charges is negative; for example, if graphs in $\GG$ have average degree less than $d$,
a possible assignment of charge to a vertex $v$ is $\deg(v)-d$.  The charge is then redistributed according to some local
rules, without changing its total amount.  As a result, there exists a vertex (or face) whose final charge is negative,
and based on the discharging rules, we argue that this is only possible if a reducible configuration appears in its neighborhood.
Of course, this description omits the most important aspect: how to choose the discharging rules?
While this seems a daunting task at first, with a bit of experience this becomes a fairly mechanical process of trial and error
(which can in fact be automatized to some extent), as we will discuss later in this chapter.

Although reducible configurations and discharging method are independent tools that have many applications on their
own, in the coloring context they are most commonly applied together, and so we devote this chapter to both of them.

\section{Overview of the Method}

Let us now flesh out the ideas from the introduction a bit.  While discharging and reducible configurations
are applicable in many contexts, they are at their best in the realm of graphs drawn on a fixed surface, and
especially for planar graphs.  This is primarily due to the well-known relationship between the numbers
of their vertices, edges, and faces.

\begin{theorem}[Euler's formula]\label{thm:eulerfla}
If $G$ is a graph embedded in a surface of genus $g$, then
$$|E(G)|\le |V(G)|+|F(G)|+g-2,$$
with equality if and only if the embedding of $G$ is $2$-cell.
\end{theorem}

Let us start with a mandatory toy example: 5-colorability of planar graphs.

\begin{theorem}\label{thm:planar5col}
Every planar graph is $5$-colorable.
\end{theorem}
\begin{proof}
Suppose for a contradiction that this is not the case, and let $G$ be a non-$5$-colorable plane graph
with the smallest number of vertices.

Clearly, $G$ is connected and it has minimum degree at least $5$.  We can strengthen this claim: $G$ does not
contain any vertex of degree $5$.  Indeed, suppose that $v\in V(G)$ has degree $5$.  Since $G$ is planar, it does
not contain $K_6$ as a subgraph, and thus $v$ has two non-adjacent neighbors $x$ and $y$.  Let $G'$ be the graph obtained
from $G$ by removing $v$ and identifying vertices $x$ and $y$ to a single vertex $z$.  Note that $G'$ is a plane graph,
and by the minimality of $G$, we conclude that $G'$ has a $5$-coloring $\varphi$.  We can extend this $5$-coloring to $G$,
by giving $x$ and $y$ the color $\varphi(z)$, and by coloring $v$ greedily (there are $5$ available colors, but only
$4$ of them are used at the neihbors of $v$, since $x$ and $y$ have the same color).  This contradicts the assumption
that $G$ is not $5$-colorable, and thus we conclude that $G$ cannot contain a vertex of degree $5$.

Let us now give each vertex $v\in V(G)$ charge $\initch(v)=\deg(v)-6$ and each face $f\in F(G)$ charge $\initch(f)=2|f|-6$.
Since all vertices of $G$ have degree at least $6$, their charge is non-negative.  Furthermore, $G$ clearly has at least $6$
vertices, and since it is connected, all its faces have length at least $3$ and their charge is non-negative.
However,
$$\sum_{v\in V(G)} \initch(v)=\left(\sum_{v\in V(G)} \deg(v)\right)-6|V(G)|=2|E(G)|-6|V(G)|$$
and
$$\sum_{f\in F(G)} \initch(f)=\left(2\sum_{f\in F(G)} |f|\right)-6|F(G)|=4|E(G)|-6|F(G)|,$$
and thus the sum of charges of vertices and faces is
$$6(|E(G)|-|V(G)|-|F(G)|)=-12$$
by Euler's formula.  This is a contradiction, showing that no non-$5$-colorable plane graph exists.
\end{proof}

For the demonstration purposes, the preceding example has a disadvantage of
having only a trivial discharging phase, with no discharging rules.  Let us
turn this to our advantage and discuss two aspects seen in the proof: its
overall structure and the choice of the assignment of charges.

We see that the proof is cleanly split to two parts: first we identify the reducible configurations, then we show
that they need to appear in each planar graph.  This makes for a clear presentation, but it hides the process of
how we devised the two parts, which usually is not in isolation; more on that in Section~\ref{sec:rules}.

Both parts are presented as proofs by contradiction: we consider a smallest counterexample in the first part,
and we argue that since we have no reducible configuration the sum of charges would have to be non-negative.
This is not the only possiblity, and both parts can be presented in a more ``positive'' manner.

\begin{proof}[Proof of Theorem~\ref{thm:planar5col}, alternative formulation]
We prove the claim by induction on the number of vertices.  So, consider some plane graph $G$, and assume
that every planar graph with fewer than $|V(G)|$ vertices is $5$-colorable.

If $G$ is disconnected, we can $5$-color its components separately by the induction hypothesis, and thus $G$
is $5$-colorable.  Hence, we can assume that $G$ is connected.  Also, if $|V(G)|\le 5$, then we can give all
vertices distinct colors.  Hence, assume that $|V(G)|\ge 6$.

Let us assign charges to vertices and faces in the same way as in the first proof of the theorem.
Since their sum is negative and all faces have non-negative charge, there exists a vertex $v\in V(G)$
such that $\initch(v)<0$, and thus $\deg(v)\le 5$.

If $v$ has degree at most $4$, then a $5$-coloring of $G-v$ which exists by the induction hypothesis can be extended to $G$ by giving $v$ a color
different from the colors of its neighbors.  And, if $v$ has degree $5$, then we can $5$-color by
the induction hypothesis the graph $G'$ constructed in the same way as in the first proof of the theorem, and extend its
$5$-coloring to $G$.
\end{proof}

Of course, both proofs are equivalent, and it is a matter of taste which style of presentation one chooses.
In our experience, the latter style is more convenient when one wants to discuss the algorithmic aspects of the proof.
The former style has the advantage that we can speak about the properties of one fixed object (a hypothetical minimal
counterexample $G$), and say things like ``$G$ has minimum degree at least $k$ and does not contain this-and-that'';
the respective formulations in the latter style tend to be more cumbersome.

\subsection{Initial assignment of charge}\label{ssec:initch}

How do we decide what initial charge we assign to vertices and faces?  Since we want to take advantage of Euler's formula,
there is actually not much freedom, and when the discharging method is used for embedded graphs, the assignment
of charges almost exclusively follows one of the options from the following lemma.

\begin{lemma}\label{lemma:initch}
Let $a\ge 0$ and $b>0$ be real numbers, and let $G$ be a graph with $2$-cell embedding in a surface of genus $g$.
Let $\initch(v)=a\deg(v)-2b$ for $v\in V(G)$ and $\initch(f)=(b-a)|f|-2b$ for $f\in F(G)$.
Then
$$\sum_{v\in V(G)}\initch(v)+\sum_{f\in F(G)}\initch(f)=2b(g-2).$$
\end{lemma}
\begin{proof}
By Euler's formula, we have
\begin{align*}
\sum_{v\in V(G)}\initch(v)+\sum_{f\in F(G)}\initch(f)&=\left(-2b|V(G)|+a\sum_{v\in V(G)}\deg(v)\right)+\left(-2b|F(G)|+(b-a)\sum_{f\in F(G)}|f|\right)\\
&(-2b|V(G)|+2a|E(G)|)+(-2b|F(G)|+2(b-a)|E(G)|)\\
&=2b(|E(G)|-|V(G)|-|F(G)|)=2b(g-2).
\end{align*}
\end{proof}

The most common choices of charge for vertices $v$ and faces $f$ are the following:
\begin{itemize}
\item $\initch(v)=\deg(v)-6$ and $\initch(f)=2|f|-6$, obtained by setting $a=1$ and $b=3$: This is the charge we used in the proof of Theorem~\ref{thm:planar5col},
and for connected plane graphs, it sums to $-12$.  The charge of all faces is nonnegative, putting the focus on vertices.  This tends to be a good
choice when proving results for unrestricted plane graphs.
\item $\initch(v)=\deg(v)-4$ and $\initch(f)=|f|-4$, obtained by setting $a=1$ and $b=2$: For connected plane graphs, the charge sums to $-8$.
Only $3$-faces have negative charge, which makes this a good choice for triangle-free graphs or graphs with restrictions on triangles.
\item $\initch(v)=2\deg(v)-6$ and $\initch(f)=|f|-6$, obtained by setting $a=2$ and $b=3$: For connected plane graphs, the charge sums to $-12$.
and this choice is convenient when dealing with $3$-regular graphs (so that vertices have no charge), or sometimes when dealing with graphs of large girth.
\end{itemize}
Of course, other choices may be useful in other special situations. The proper
choice of charge can greatly simplify the discharging rules.  However, let us
remark that at least in principle, all the charge choices are equivalent.
Indeed, suppose that we have assigned charge $\initch(v)=a\deg(v)-2b$ for $v\in V(G)$ and $\initch(f)=(b-a)|f|-2b$ for $f\in F(G)$.
Consider any other real numbers $a'\ge 0$ and $b'>0$.
Now, let each vertex send $\gamma=\frac{ab'-a'b}{b'}$ units of charge to each incident face, and let $\finch$ denote the resulting assigment of charges.
We have $\finch(v)=(a-\gamma)\deg(v)-2b=\frac{b}{b'}(a'\deg(v)-2b')$ and $\finch(f)=(b-a+\gamma)|f|-2b=\frac{b}{b'}((b'-a')|f|-2b')$,
which up to scaling is the same charge we would obtain if we instead of $a$ and $b$ chose $a'$ and $b'$.
Hence, if a discharging argument is possible with the latter choice, it is also possible with the former one, by adding the discharging rule of
moving $\gamma$ units of charge from each vertex to each incident face.
In other words, choosing a ``wrong'' charge may make the discharging rules more complicated, but not impossible to find.

Let us remark that some authors prefer to negate the charge assignments we suggest, so that the sum of charges is positive and
after redistribution using the discharging rules, a reducible configuration
is then found near the vertices or faces of positive charge.  This convention can be mostly found
in older works, most notably in the proofs of Four Color Theorem~\cite{AppHak1,rsst}.  As this is purely a matter of taste
and nowadays the choice of charge summing to negative is more popular, this will be the convention used in this book.

\section{A more substantial example}

We now give a further example demonstrating more of the aspects of the method.  Specifically, we will show that all
projective-planar graphs without $4$-cycles are $4$-colorable.  Let us start with the reducible configurations (see Figure~\ref{fig:no4cproj-redu}).

\begin{figure}
\begin{center}
\begin{asy}
v[0]=(0,0);

for (i = 0; i < 5; ++i)
  v[i+1]=(3.2,1) + 1.2dir(-90-72i);
v[6] = 0.5(v[3]+v[4])+(0,0.9);

v[7] = (8,0);
for (i = 0; i < 9; ++i)
  v[8+i] = v[7]+2.5dir(160-140i/8);

draw(v[3]--v[6]--v[4]--v[5]--v[1]--v[2]--v[3]--v[4]);
draw(v[7]--v[8]--v[9]--v[10]--v[11]--v[12]--v[13]--v[14]--v[15]--v[16]--v[7]--v[9]);
draw(v[12]--v[7]--v[13]);

outnbrs (v[0],90,3);
outnbrs (v[1],-90,2);
outnbrs (v[2],-90-72,2);
outnbrs (v[3],135,2);
outnbrs (v[4],45,1);
outnbrs (v[5],-18,2);
outnbrs (v[6],90,2);
outnbrs (v[7],-90,1);
outnbrs (v[8],180,2);
for (i = 1; i < 8; ++i)
  outnbrs(v[8+i], 160-140i/8, i==1 || i==4 || i == 5 ? 1 : 2);
outnbrs (v[16],0,2);

for (i = 0; i <=16; ++i)
  vertex(v[i]);

label("$v_1$", v[3],SE);
label("$v_2$", v[4],E);
label("$v_3$", v[5],NE);
label("$v_4$", v[1],E);
label("$v_5$", v[2],NW);
label("$v_6$", v[6],E);

label("$v$", v[7],SE);
label("$v_1$", v[8],E);
label("$v_2$", v[9],E);
label("$v_3$", v[10],SE);
label("$v_4$", v[11],SE);
label("$v_5$", v[12],SE);
label("$v_6$", v[13],SE);
label("$v_7$", v[14],S);
label("$v_8$", v[15],SW);
label("$v_9$", v[16],S);

label("(b)", v[0]+(0,-1));
label("(c)", v[1]+(0,-1));
label("(d)", v[7]+(0,-1));
\end{asy}
\end{center}
\caption{Reducible configurations from Lemma~\ref{lemma:no4cproj-redu}.}\label{fig:no4cproj-redu}
\end{figure}

\begin{lemma}\label{lemma:no4cproj-redu}
Let $G$ be a graph with no $4$-cycles drawn in the projective plane, such that every projective-planar graph
with no $4$-cycles and with fewer than $|V(G)|$ vertices is $4$-colorable.  If $G$ is not $4$-colorable, then
\begin{itemize}
\item[\textrm{(a)}] $G$ is connected;
\item[\textrm{(b)}] the minimum degree of $G$ is at least $4$;
\item[\textrm{(c)}] if $f$ is a $5$-face of $G$ sharing an edge $v_1v_2$ with a $3$-face $g$ and all vertices
incident with $f$ and $g$ except for $v_1$ have degree $4$, then $v_1$ has degree at least $6$; and,
\item[\textrm{(d)}] if $v\in V(G)$ has degree $6$ and is incident with a $3$-face $g_1$, a $5$-face $f_1$,
a $3$-face $g_2$, and a $5$-face $f_2$ in order, then at least one vertex incident with these faces other than $v$ has
degree at least $5$.
\end{itemize}
\end{lemma}
\begin{proof}
For (a), if $G$ were a disjoint union of non-empty graphs $G_1$ and $G_2$, then both $G_1$ and $G_2$ would be
$4$-colorable by the assumption, and thus $G$ would also be $4$-colorable.  Similarly, for (b), if $G$ contained a vertex $v$ of
degree at most $3$, then $G-v$ is $4$-colorable by the assumption and the coloring can be extended to $G$ by giving $v$ a color
different from the colors of its neighbors.

For (c), let $K=v_1v_2\ldots v_5$ be the boundary walk of $f$.  Let us first consider the case that the face $f$ is not bounded by a $5$-cycle.
Since $G$ has no loops or parallel
edges, an edge $e$ appears twice in the boundary of $f$, and the remaining three edges form a triangle.  Note that $e\neq v_1v_2$,
since the edge $v_1v_2$ is incident with a face $g$ distinct from $f$.  Also, the only triangle containing the edge $v_1v_2$
is the one bounding $g$, since $G$ does not contain a $4$-cycle.  It follows that either the path $v_1v_2v_3$ or the path $v_5v_1v_2$
is contained in the boundaries of both $f$ and $g$, and thus either $v_1$ or $v_2$ has degree two, which is a contradiction.

Hence, $K$ is a cycle, and since $G$ has no $4$-cycles, $K$ is induced.  Let $T=v_1v_2v_6$ be the triangle bounding the face $g$.
Since $K$ is an induced cycle, we have $v_6\not\in V(K)$, and since $G$ contains no $4$-cycles, $v_6$ has no neighbor in $K$ other
than $v_1$ and $v_2$.  Suppose for a contradiction that $\deg(v_1)\le 5$.  By the assumptions, there exists a $4$-coloring $\varphi$
of $G-\{v_1,\ldots, v_6\}$.  For $i\in[6]$, let $L(v_i)$ denote the subset of $[4]$ consisting of the colors not
appearing on the neighbors of $v_i$ in the coloring $\varphi$; we have $|L(v_i)|\ge 2$ for $i\in\{1,3,4,5,6\}$ and $|L(v_2)|=3$.
To extend the coloring $\varphi$ to a $4$-coloring of $G$, it suffices to color $K\cup T$ from the lists given by $L$.

First, let us choose a color $c_1\in L(v_2)$ such that $|L(v_3)\setminus\{c\}|\ge 2$.  If we can color $v_1$ and $v_6$ by colors
different from $c_1$, we can then color $v_2$ by $c_1$ and greedily color $v_5$, $v_4$, and $v_3$ in order by colors from their lists different from
the colors of their neighbors.  Otherwise, we have $L(v_1)=L(v_6)=\{c_1,c_2\}$ for some color $c_2$.
Let $c_3\in L(v_2)$ be a color different from $c_1$ and $c_2$.  We color $v_2$ by $c_3$ and greedily color $v_3$, $v_4$, $v_5$, $v_1$, and $v_6$
in order.  It follows that $G$ is $4$-colorable, which is a contradiction; hence, (c) holds.

Finally, let us consider (d).  Let $vv_1v_2$, $vv_2v_3v_4v_5$, $vv_5v_6$, and $vv_6v_7v_8v_9$ be the facial walks of
$g_1$, $f_1$, $g_2$, and $f_2$.  Observe that since $G$ has no parallel edges, no $4$-cycles, and minimum degree at least $4$,
the vertices $v_1$, \ldots, $v_9$ are pairwise distinct.  By the assumptions, there exists a $4$-coloring $\varphi$ of $G-\{v,v_1,\ldots,v_9\}$.
Note that $v$ has only one neighbor $y$ colored by $\varphi$, and $v_1$ has exactly two neighbors $y_1$ and $y_2$ that are
colored by $\varphi$ (since $v_1$ cannot be adjacent to $v_3$, \ldots, $v_9$ by the absence of $4$-cycles).
Hence, we can choose a color $c\in[4]\setminus\{\varphi(y)\}$ such that $|[4]\setminus\{c,\varphi(y_1),\varphi(y_2)\}|\ge 2$.
Color $v$ by the color $c$, then color vertices $v_9$, $v_8$, \ldots, $v_1$ greedily in order using colors different
from the colors of their neighbors colored earlier (note that even if there are some
edges among $v_2$, \ldots, $v_9$ not contained in the path $v_2\ldots v_9$, this does not affect the validity of the
greedy coloring procedure).
\end{proof}

Now, we can proceed with the discharging phase.

\begin{theorem}\label{thm:no4cproj}
Every projective-planar graph without $4$-cycles is $4$-colorable.
\end{theorem}
\begin{proof}
Suppose for a contradiction this is not the case, and let $G$ be a
non-$4$-colorable graph drawn in the projective plane with
the smallest number of
vertices.  By Lemma~\ref{lemma:no4cproj-redu}(a), $G$ is connected.
Let us assign initial charge $\initch(v)=\deg(v)-4$ to each vertex $v$ of $G$,
and initial charge $\initch(f)=|f|-4$ to each face $f$ of $G$.

If the embedding of $G$ is $2$-cell, then the sum of the initial charges
is $-4$ by Lemma~\ref{lemma:initch}.  If the embedding is not $2$-cell, then
since $G$ is connected, there exists a unique face of $G$ whose interior contains
the crosscap of the projective plane, and $G$ is planar and the sum of the initial charges is $-8$.
In either case, the total amount of charge is negative.

Next, we redistribute the charge according to the following rules.
For a $3$-face $g$, let $r(g)$ denote the number of incident vertices of degree
at least $5$.
\begin{itemize}
\item[(R1)] A vertex $v$ of degree at least $5$ incident with a $3$-face $g$ sends $1$ to $g$
if $\deg(v)\ge 7$, or if $\deg(v)=6$ and $v$ is incident with at most two triangles,
or if $\deg(v)=6$ and $g$ is the only triagle incident with $v$ satisfying $r(g)=1$.
The vertex $v$ sends $2/3$ to $g$ if $\deg(v)=6$ and $v$ is incident with three $3$-faces $g$, $g_1$, and $g_2$
such that $r(g)=r(g_1)=1$.  Otherwise, $v$ sends $1/2$ to $g$.
\item[(R2)] If a face $f$ shares an edge $uv$ with a $3$-face $g$ such that $\deg(u)=\deg(v)=4$,
then $f$ sends $1/3$ to $g$ if $r(g)=0$, and $f$ sends $1/6$ to $g$ if $r(g)=1$.
\item[(R3)] If a face $f$ shares an edge $uv$ with a $3$-face $g$ such that $r(g)=1$ and $\deg(u)=4$ and $\deg(v)\ge 5$,
then $f$ sends $1/6$ to $g$ if $|f|\ge 6$, or $|f|=5$ and $\deg(v)=5$, or $|f|=5$ and $\deg(v)=6$ and $f$ is incident with a vertex of degree
at least $5$ distinct from $v$.
\end{itemize}
Let $\finch$ denote the final charge after performing the redistribution.
Note that the total amount of charge is unchanged, and thus the sum of
final charges is negative.

We argue that each vertex and face has a non-negative final charge,
which gives a contradiction.  Let us start with vertices: By Lemma~\ref{lemma:no4cproj-redu}(b),
each vertex $v$ of $G$ has degree at least $4$.  If $\deg(v)=4$, then $v$ sends no charge
and $\finch(v)=\initch(v)=0$.  Suppose now that $\deg(v)\ge 5$, and let $t$ denote the number
of $3$-faces incident with $v$.  Since $G$ contains no $4$-cycles, no two $3$-faces are consecutive
in the cyclic order around $v$, and thus $t\le \lfloor\deg(v)/2\rfloor$.
If $\deg(v)=5$, then $t\le 2$ and $v$ sends $1/2$ to each incident $3$-face by (R1), and thus
$\finch(v)=\initch(v)-t/2=1-t/2\ge 0$.  If $\deg(v)\ge 7$, then $v$ sends $1$ to each incident $3$-face by (R1),
and thus
$\finch(v)=\initch(v)-t\ge \deg(v)-4-\lfloor\deg(v)/2\rfloor=\lceil\deg(v)/2\rceil-4\ge 0$.
So, suppose that $\deg(v)=6$.  If $t\le2$, then $\finch(v)=\initch(v)-t\ge 0$.  If $t=3$, then let $g_1$, $g_2$, and $g_3$
be the $3$-faces incident with $v$ such that $r(g_1)\le r(g_2)\le r(g_3)$.  If $r(g_2)\ge 2$, then $v$ sends $1/2$ to $g_2$ and to $g_3$,
and at most $1$ to $g_1$, hence $\finch(v)\ge\initch(v)-2=0$.  If $r(g_2)=1$, then $v$ sends at most $2/3$ to each incident $3$-face,
and $\finch(v)\ge\initch(v)-2=0$.

Next, consider the charge of the faces.  Let $g$ be a $3$-face; since $G$ does not contain $4$-cycles
and has minimum degree greater than $2$, all faces that share an edge with $g$ have length at least $5$,
and thus $g$ sends no charge.  If $r(g)\ge 2$, then $g$ receives at least $1/2$ from each incident vertex of degree at least $5$ by (R1)
and thus $g$ receives at least $1$ in total.
If $r(g)=0$, then $g$ receives $1/3$ from each face with that it shares an edge by (R2).
Hence, suppose that $r(g)=1$, and let $v$ be the vertex of degree at least $5$ incident with $g$.  Note that
$g$ receives $1/6$ from the face opposite to $v$ by (R2).  If $\deg(v)=5$, then $g$ receives $1/2$ from $v$ by (R1)
and $1/6$ from each of the two faces with that $g$ shares an edge incident with $v$ by (R3), and the total amount received
is $1/2+3\times 1/6=1$.  If $\deg(v)=7$, or $\deg(v)=6$ and $v$ is inicident with at most two $3$-faces,
or $\deg(v)=6$ and $g$ is the only $3$-face with $r(g)=1$ incident with $v$, then $g$ receives $1$ from $v$ by (R1).
Finally, suppose that $\deg(v)=6$, $v$ is incident with three $3$-faces, and a $3$-face $g_1\neq g$ incident with $v$ satisfies $r(g_1)=1$.
In this case, $v$ sends $2/3$ to $g$.
Let $f_1$, $g$, $f_2$, $g_1$ be faces incident with $v$ in order according to the drawing of $G$.
By Lemma~\ref{lemma:no4cproj-redu}(d), it cannot be the case that both $f_1$ and $f_2$ are $5$-faces whose only incident vertex
of degree at least $5$ is $v$, and thus either $f_1$ or $f_2$ sends $1/6$ to $g$ by (R3).  The total amount sent to $g$
is at least $2/3+2\times 1/6=1$.
In all the cases, the final charge of $g$ is at least $\initch(g)+1=0$.

Finally, let $f$ be a face of length at least $5$.  If $|f|\ge 6$, then $\finch(f)\ge \initch(f)-|f|/3=\frac{2}{3}|f|-4\ge 0$
by (R2) and (R3).  Hence, suppose that $|f|=5$.  If $f$ sends at most $1/6$ to each incident $3$-face by (R2), then
$\finch(f)\ge \initch(f)-5/6>0$.  Hence, suppose that $f$ sends $1/3$ to an incident $3$-face $g$ with $r(g)=0$ by (R2).
By Lemma~\ref{lemma:no4cproj-redu}(c), not all vertices incident with $f$ have degree $4$.  Let $v_1v_2v_3v_4v_5$ be the boundary
walk of $f$, where $\deg(v_5)\ge 5$.  If at least one of $v_1$, \ldots, $v_4$ has degree at least $5$, then
$f$ sends at most $\max(2\times 1/3+2\times 1/6, 1/3+4\times 1/6)=1$ by (R2) and (R3), and $\finch(f)\ge \initch(f)-1=0$.
Hence, suppose that $\deg(v_1)=\ldots=\deg(v_4)=4$.  Let $g_1$ and $g_2$ be the faces sharing edges $v_1v_5$ and $v_4v_5$ with $f$,
respectively.  If $f$ sends charge to neither $g_1$ nor $g_2$ by (R3), then $f$ sends at most $3\times 1/3$ by (R2) and (R3),
and $\finch(f)\ge \initch(f)-1=0$.  By symmetry, we can assume that $f$ sends positive amount of charge to $g_1$, and thus $g_1$
is a $3$-face with $r(g_1)=1$.  Since the only vertex incident with $f$ of degree at least $5$ is $v_5$, the rule (R3)
applies only if $\deg(v_5)=5$.  However, this is not possible by Lemma~\ref{lemma:no4cproj-redu}(c).
\end{proof}

In the next section, we explain how we came up with the reducible configurations and arcane-looking rules (R1)--(R3).
However, before that, let us comment on errors that often appear (even in some published) proofs using the method of reducible
configurations.

\subsection{Common errors}\label{ssec:errors}

Dealing with planar graphs or graphs embedded on other surfaces has an advantage of easy visualisation.
The disadvantage is the ease of drawing missleading pictures.

\begin{figure}
\begin{center}
\begin{asy}
v[0]=(0,0);
v[1]=v[0]+3dir(120);
v[2]=v[0]+3dir(60);
v[3]=v[0]+1.5dir(105);
v[4]=v[0]+1.5dir(75);
draw(v[0]--v[1]--v[2]--v[0]--v[3]--v[4]--cycle);
for (i = 0; i < 5; ++i)
  vertex(v[i]);
label ("$v_1=v_4$", v[0], S);
label ("$v_2$", v[1], NW);
label ("$v_3$", v[2], NE);
label ("$v_5$", v[4], NE);
label ("$v_6$", v[3], NW);

label ("$f$", v[0] + 2dir(90));
\end{asy}
\end{center}
\caption{A face not bounded by a cycle.}\label{fig:noncycface}
\end{figure}

A common source of errors is the assumption that faces must be bounded by cycles.  Even excluding faces with disconnected boundary,
this is not necessarily the case; e.g., a $6$-face $f$ may be bounded by walk $v_1\ldots v_6$ with $v_1=v_4$, see Figure~\ref{fig:noncycface}.
When coloring graphs without $6$-cycles, it would therefore be wrong to argue that such graphs do not have $6$-faces and skip their
discussion in the discharging\footnote{We skipped the discussion of $4$-faces in our proof of Theorem~\ref{thm:no4cproj}, which
we suspect did not bother the reader till now.  In our case, this is actually safe---if $v_1v_2v_3v_4$ is a boundary walk of a $4$-face
and say $v_1=v_3$, then since the graphs we consider do not have parallel edges, it must actually be that $v_1v_2$ and $v_2v_3$
is the same edge incident twice and consecutively with the face, and thus $v_2$ would have degree $1$, which is excluded by Lemma~\ref{lemma:no4cproj-redu}(b).}.

The usual way to deal with this issue is to argue that the considered hypothetical minimal counterexample must be $2$-connected
(which is often easy, as we will see in later examples).  In plane graphs, this is equivalent with the statement that all faces
are bounded by cycles.  However, in graphs embedded in other surfaces, this is not true---there exist $2$-connected graphs
drawn with representativity $1$---and thus one needs to be more careful and consider the existence of faces not bounded by cycles
both in the discharging and the discussion of reducible configurations.

On a related note, one often sees formulations like ``if a vertex $v$ is incident with a face $f$ satisfying some conditions,
then $v$ sends $x$ units of charge to $f$'' in the discharging rules.  Unless $f$ is bounded by a cycle, this is ambiguous;
if $v$ appears $k$ times in the boundary walk of $f$, does $v$ send $x$ or $kx$ units of charge to $f$?  Almost always the latter
is the correct interpretation, and this is actually rarely a source of substantial problems with the proof, but still it is better to
be careful.

There is a similar source of (at least formal) problems in the proofs of reducibility of configurations.
It is easiest to illustrate it by an example.
Let us demonstate another reducible configuration we could have used in the proof of Theorem~\ref{thm:no4cproj}
(if it turned out those obtained in Lemma~\ref{lemma:no4cproj-redu} are not up to the task).

\begin{figure}
\begin{center}
\begin{asy}
v[1]=(0,0);
v[2]=v[1]+2dir(0);
v[3]=v[1]+2dir(60);
for (i = 0; i < 3; ++i)
  v[4+i]=v[1]+1.5dir(114) + 1.5dir(-66+(2+i)*72);
for (i = 0; i < 4; ++i)
  v[7+i]=v[2]+1.5dir(60) + 1.5dir(-120-(2+i)*60);

draw(v[1]--v[6]--v[5]--v[4]--v[3]--v[7]--v[8]--v[9]--v[10]--v[2]--v[1]--v[3]--v[2]);
outnbrs(v[1],-90,2);
outnbrs(v[2],-90,2);
outnbrs(v[4],90,2);
outnbrs(v[5],120,2);
outnbrs(v[6],180,2);
outnbrs(v[7],90,2);
outnbrs(v[8],60,2);
outnbrs(v[9],0,2);
outnbrs(v[10],-30,2);
for (i = 1; i < 11; ++i)
  vertex(v[i]);

label("$v_1$", v[1], NW);
label("$v_2$", v[2], NE);
label("$v_3$", v[3], N);
label("$x_1$", v[4], S);
label("$x_2$", v[5], SW);
label("$x_3$", v[6], S);
label("$y_1$", v[7], S);
label("$y_2$", v[8], SW);
label("$y_3$", v[9], W);
label("$y_4$", v[10], NW);

label("$f_1$", v[1]+1.5dir(114));
label("$f_2$", v[2]+1.5dir(60));
\end{asy}
\end{center}
\caption{A configuration from Lemma~\ref{lemma:false-redu}.}\label{fig:false-redu-nf}
\end{figure}

\begin{lemma}\label{lemma:false-redu}
Let $G$ be a graph with no $4$-cycles drawn in the projective plane, such that every projective-planar graph
with no $4$-cycles and with fewer than $|V(G)|$ vertices is $4$-colorable, but $G$ itself is not $4$-colorable.
Let $g$ be a $3$-face of $G$ bounded by a cycle $v_1v_2v_3$, where $\deg(v_1)=\deg(v_2)=5$ and $\deg(v_3)=4$.
If the edge $v_1v_3$ is incident with a $5$-face $f_1$ and the edge $v_2v_3$ is incident with a $6$-face $f_2$,
then at least one vertex incident with $f_1$ or $f_2$ distinct from $v_1$ and $v_2$ has degree at least $5$.
\end{lemma}
\begin{proof}[A flawed proof]
Similarly to the proof of Lemma~\ref{lemma:no4cproj-redu}(c), we argue that $f_1$ and $f_2$ are bounded by cycles,
say $v_1v_3x_1x_2x_3$ and $v_2v_3y_1y_2y_3y_4$, respectively; see Figure~\ref{fig:false-redu-nf}.  By the assumptions, there exists a $4$-coloring $\varphi$
of the subgraph of $G$ obtained by removing vertices incident with $f_1$ and $f_2$.
For each vertex $x$ incident with $f_1$ or $f_2$, let $L(x)$ denote the subset of $[4]$ consisting of the colors not
appearing on the neighbors of $x$ in the coloring $\varphi$; we have $|L(x)|\ge 2$ for all such vertices except for $v_3$,
which has $L(v_3)=[4]$.  We now need to extend $\varphi$ by coloring the vertices from the lists given by $L$.

If there exists a color $c\in L(v_1)$ such that $|L(v_2)\setminus \{c\}|\ge 2$, then color $v_1$ by $c$, color
$x_3$, $x_2$, and $x_1$ greedily in order, and remove $c$ and the color of $x_1$ from the list of $v_3$.  It is
easy to see that the $6$-cycle bounding $f_2$ can be colored from the resulting lists of size at least two.

Hence, we can assume that there exists no such color, and thus $v_1$ and $v_2$ have the same list of size two, say $L(v_1)=L(v_2)=\{1,2\}$.
Remove the colors $1$ and $2$ from the list of $v_3$ and note that we color the $10$-cycle $v_1x_3x_2x_1v_3y_1y_2y_3y_4v_2$ (ignoring the now
irrelevant edges $v_1v_3$ and $v_2v_3$) from the resulting lists of size at least two.
\end{proof}
Did you spot the error?  The problem is that it might be the case that $x_2=y_3$ and the lists $L$ obtained in the first paragraph
of the ``proof'' might be the ones depicted in Figure~\ref{fig:false-redu-flaw}---it is easy to see that there is no proper coloring
from these lists.  This kind of omissions is quite common in the literature.

Let us remark that even if we assumed that $f_1$ and $f_2$ only share the vertex $v_3$, we would still need to additionally discuss
possible edges between the incident vertices (e.g, there might be an edge joining $x_2$ and $y_2$), which also change the subgraph
to that we extend the coloring $\varphi$.

\section{How to find the rules?}\label{sec:rules}

In this section, let us give a semi-fictional story\footnote{The actual story had a bit more of a trial-and-error,
including introduction of a reducible configuration that we did not use in the end and a last-minute change
in the discharging rules to match what we ended up describing in this section; but the cleaner version
should hopefully be instructive enough.} of how we came up with the reducible configurations
and rules from the proof of Theorem~\ref{thm:no4cproj}.  At this point, we will give relatively little attention to the
issue of how to recognize a reducible configuration, as this will be discussed in more detail in Subsection~\ref{ssec:howto-redu}.

\begin{figure}
\begin{center}
\begin{asy}
v[1]=(0,0);
v[2]=v[1]+2dir(0);
v[3]=v[1]+2dir(60);
for (i = 0; i < 3; ++i)
  v[4+i]=v[1]+1.5dir(114) + 1.5dir(-66+(2+i)*72);
v[7]=v[2]+1.5dir(60) + 1.5dir(-240)+(0,-1);
v[8]=v[2]+1.5dir(60) + 1.5dir(-120-3*60)+(-0.5,0);
for (i = 2; i < 4; ++i)
  v[7+i]=v[2]+1.5dir(60) + 1.5dir(-120-(2+i)*60);
v[11] = (1,4.5);

draw(v[1]--v[6]{dir(120)}..v[11]--v[4]--v[3]--v[7]--v[8]--v[11]{dir(20)}..v[10]--v[2]--v[1]--v[3]--v[2]);
outnbrs(v[1],-90,2);
outnbrs(v[2],-90,2);
outnbrs(v[4],0,2);
outnbrs(v[6],225,2);
outnbrs(v[7],90,2);
outnbrs(v[8],180,2);
outnbrs(v[10],-60,2);
for (i = 1; i <= 11; ++i)
  if (i != 5 && i != 9)
    vertex(v[i]);

label("$f_1$", v[1]+1.5dir(114));
label("$f_2$", v[2]+1.5dir(60));

label(scale(0.8)*Label("12"), v[1], NW);
label(scale(0.8)*Label("12"), v[2], NE);
label(scale(0.8)*Label("1234"), v[3], N);
label(scale(0.8)*Label("34"), v[4], W);
label(scale(0.8)*Label("12"), v[6], NE);
label(scale(0.8)*Label("34"), v[7], S);
label(scale(0.8)*Label("34"), v[8], E);
label(scale(0.8)*Label("12"), v[10], NW);
label(scale(0.8)*Label("1234"), v[11], N);
\end{asy}
\end{center}
\caption{The problem with the proof of Lemma~\ref{lemma:false-redu}.}\label{fig:false-redu-flaw}
\end{figure}

Let us consider a minimal counterexample $G$ to Theorem~\ref{thm:no4cproj}.
We start with the obvious observation that since we are $4$-coloring the graph, $G$ has minimum degree at least $4$.
Furthermore, since $G$ has no $4$-cycles, all its faces have length $3$ or at least $5$ (at this stage, we can just
ignore the issues raised in Subsection~\ref{ssec:errors}, as long as we remember to consider them in the final proof).
Considering the options from Lemma~\ref{lemma:initch}, it is natural to assign charge $\deg(v)-4$ to each vertex $v$
and $|f|-4$ to each face $f$, so that the negative charge appears only on $3$-faces.

Since $G$ contains no $4$-cycles, each face $f$ sharing an edge with a $3$-face $g$ must have length at least $5$, and thus it has positive charge.
As $g$ is incident with three such faces, it is natural to discharge $g$ by sending $1/3$ from each such face, giving
us the following precursor of rules (R2) and (R3):
\begin{itemize}
\item[(R2')] If a face $f$ shares an edge with a $3$-face $g$, then $f$ sends $1/3$ to $g$.
\end{itemize}
We did not do anything with the (nonnegative) charges of vertices, (R2') was designed to make charge of triangles $0$,
and if $f$ is a face of length at least $6$, then its charge decreases by at most $|f|/3$ using rule (R2'),
giving its final charge at least $|f|-4-|f|/3\ge 0$.

Hence, the only place where we now have negative charges are $5$-faces---the extreme case being a $5$-face $f$ sharing
edges with five $3$-faces $g_1$, \ldots, $g_5$, which now has charge $-2/3$.  We still have positive charge on vertices
whose degree is at least $5$; but if there is no such vertex incident with $f$ or $g_1$, \ldots, $g_5$, it would be difficult
to formulate a rule to redirect this charge to $f$.  So, let us try to find a reducible configuration in the case that
all vertices incident with $f$, $g_1$, \ldots, $g_5$ have degree $4$.  Now, using Corollary~\ref{cor:gallai1}, we see that
any $2$-connected subgraph consisting of vertices of degree $4$ different from an odd cycle or a clique is reducible.  Thus, we need even
less to find a reducible configuration: a $5$-face $f$ sharing an edge with a $3$-face $g$ such that all vertices incident with $f$
and $g$ have degree $4$.  We will refer to this configuration (a special case of the configuration from Lemma~\ref{lemma:no4cproj-redu}(c))
as (c').

So, in the discussed situation of a $5$-face $f$ sharing edge with $3$-faces $g_1$, \ldots, $g_5$, we know that either $f$
or all of $g_1$, \ldots, $g_5$ are incident with a $(\ge\!5)$-vertex, and we need to move its charge somehow to $f$.
There are multiple semi-equivalent ways how to achieve that in the rules: we could write a rule directly moving the charge from
the vertex to $f$; or, as we decided to do in our proof of Theorem~\ref{thm:no4cproj}, we can move this charge to the incident
triangle, and then decrease the amount of charge that needs to be sent to $3$-faces from incident faces. Which choice leads to
simpler analysis depends on circumstances (and the personal preference) and typically needs a bit of an experimentation.

Anyway, let us go with our choice to send the charge from vertices of degree at least $5$ to incident $3$-faces first.
How much charge can we send? Vertex of degree $5$ has charge $1$ and can be incident with up to two $3$-faces,
so sending $1/2$ is a safe option (this will leave positive charge on vertices of larger degree, which we may find
useful later).
\begin{itemize}
\item[(R1')] A vertex $v$ of degree at least $5$ incident with a $3$-face $g$ sends $1/2$ to $g$.
\end{itemize}
A $3$-face $g$ with $r(g)\ge 2$ now has non-negative charge, and thus we do not need to send it anything more.
A $3$-face $g$ with $r(g)=0$ is unaffected and thus we keep the rule (R2') for such faces unchanged.
The interesting case is a $3$-face $g$ with $r(g)=1$, bounded by a $3$-cycle $v_1v_2v_3$ with $\deg(v_3)\ge 5$.
After executing (R1'), this face has charge $-1/2$, which we need to obtain from the neighboring faces.
Unlike the case $r(g)=0$, the situation is not symmetric---it may be useful to send different amounts of charge
across the edge $v_1v_2$ and across the edges incident with $v_3$.  But since at the moment we do not have
much idea what amounts would be appropriate, let us go with the symmetric option for now, and let us
replace (R2') by the following rule.
\begin{itemize}
\item[(R2'')] If a face $f$ shares an edge with a $3$-face $g$, then $f$ sends $\max(2-r(g),0)/6$ to $g$.
\end{itemize}
Now, if a $5$-face $f$ is incident with at least two vertices of degree at least $5$, then $f$ sends
at most $\max\bigl(2\times \frac{1}{3}+2\times\frac{1}{6},\frac{1}{3}+4\times\frac{1}{6}\bigr)=1$
by (R2''), and the final charge of $f$ is non-negative.  If all vertices incident with $f$ have degree $4$,
then by (c') $f$ cannot share an edge with a face $g$ with $r(g)=0$, and thus $f$ sends at most $5/6$ by (R2'').
Hence, suppose that $f$ is bounded by the cycle $v_1\ldots v_5$ with $\deg(v_5)\ge 5$ and $\deg(v_1)=\ldots=\deg(v_4)$.
Then $f$ may send $3\times \frac{1}{3}$ over edges $v_1v_2$, $v_2v_3$, and $v_3v_4$ by (R2''), and if
say the edge $v_1v_5$ is shared with a $3$-face $g$ with $r(g)=1$, then sending $1/6$ to $g$ will make the charge
of $f$ negative; let us call this situation \emph{the light $5$-face}.

We now have two options: modify rule (R2'') to deal with this situation, or to try to find another reducible configuration.
The former turns out to be a bad idea (if $g$ did not receive any charge from $f$, it might for the same reason
not be able to receive any charge across its other edge incident with $v_5$, and thus it would have to receive charge
$1/2$ from the third face $f'$ with that it shares an edge, which would likely lead to shortage of charge in $f'$).
So, we try to work out whether the configuration we now have (a $5$-face with exactly one vertex $v_5$ of degree greater than $4$,
such that one edge of $f$ incident with $v_5$ is shared with a $3$-face $g$ satisfying $r(g)=1$) is reducible.
And we saw in Lemma~\ref{lemma:no4cproj-redu}(c), this turns out to be the case when $\deg(v_5)=5$.

Hence, suppose that $\deg(v_5)\ge 6$.  In this case we are not able to find a reducible configuration, but we have some
extra charge to use.  If $\deg(v_5)\ge 7$, then $v_5$ has at least $1$ unit of charge available
per incident $3$-face, and thus it can fully cover the charge of all such $3$-faces and $f$ does not need to send them anything.
Similarly, we can discharge the case that $\deg(v_5)=6$ and $v_5$ is incident with at most two $3$-faces,
or $\deg(v_5)=6$ and $v_5$ is incident with three $3$-faces, but only one $3$-face $g$ satisfying $r(g)=1$.

However, if $\deg(v_5)=6$ and $v_5$ is incident with three $3$-faces, such that at least two of them (say $g$ and $g_1$)
satisfy $r(g)=r(g_1)=1$, then $v_5$ does not have enough charge to cover the triangles by itself.
Let $v_1v_5v'_1$ be the triangle bounding $g$.  Worst-case, $v_5$ may be only able to send $2/3$ to $g$, and
$g$ will receive $1/6$ across the edge $v_1v'_1$, so we still lack $1/6$.  We could modify the rules to only take $1/12$
from $f$ and the face across the edge $v_5v'_1$, but this does not help in the light $5$-face case, so we need to
try to redistribute the charge in another way.

We could increase the amount of charge received from the face $f'$ that shares the edge $v_1v'_1$ with $g$ to $1/3$, but that would
be problematic at $f'$ (what if $f'$ shares edges with four such triangles incident with vertices of degree $6$?).
Or, we can try to take whole missing amount $1/6$ from the face $f''$ with that $g$ shares the edge $v_5v'_1$;
but this would again fail if $f''$ also forms the light $5$-face configuration.  As discharging does not seem possible,
it would be nice to find another reducible configuration in one of these cases.  In the former one, we did not succeed,
but fortunately the latter one gave us the reducible configuration described in Lemma~\ref{lemma:no4cproj-redu}(d), once
we recalled that $v_5$ must also be incident with another $3$-face $g_1$ with $r(g_1)=3$.

Rules (R1), (R2), and (R3) are now just a summary of what we decided to do in the last few paragraphs.
Of course, at this point one needs to again go over all the cases and check the altered rules indeed
discharge all the vertices and faces; and in more complicated proofs, further iterations of tweaking the rules
and adding reducible configurations may be needed.

\subsection{Discharging rules and linear programming}\label{ssec:dischlp}

Of course, in more complicated proofs, it may become hard to guess what the right amounts of charge to
transfer are, and time consuming to keep track of charges of all the arrangements of vertices and faces
when the discharging rules change.  In such a situation, it may be useful to use a computer-assisted approach
to find the amounts via linear programming.  Let us demonstrate this technique again using the setting
of Theorem~\ref{thm:no4cproj}.

Suppose that we are again at the point of the proof where we do not yet have any reducible configurations
(beyond noting that a minimal counterexample must have minimum degree at least $4$)
and we just decided to assign the initial charge $\initch$ to vertices and faces as described before.
We need to discharge triangles, and let us guess that the amount of charge sent from each face $f$ to a $3$-face $g$
with that $f$ shares an edge $uv$ will only depend on the degrees of $u$, $v$, and the third vertex $w$ incident with $g$,
where no disctinction will
be made between vertices of degree say $7$ and larger degrees.  Thus, for all triples $a,b,c\in\{4,5,6,{\ge\!7}\}$,
we introduce a variable $x_{abc}$, denoting the amount of charge $f$ sends to $g$ if the degree of $u$ is $a$, the degree of $v$ is $b$,
and the degree of $w$ is $c$ (to reduce the number of variables, we can of course by symmetry assume $a\le b$).
Let us also guess that it will suffice to distribute the charge of vertices of degree at least $5$ evenly
among the incident $3$-faces, so vertices of degree $5$, $6$, and $\ge\!7$ will send at least $1/2$, $2/3$, and $1$ to incident triangles,
respectively.

For each type of a $3$-face (determined by the degrees of its vertices), we now introduce linear constraints
describing that its final charge after performing the discharging should be non-negative.  For example, a $3$-face
incident with vertices of degrees $4$, $4$, and $5$ will receive charge $1/2$ from the vertex of degree $5$ and
$x_{445}+2x_{454}$ from the incident faces, and thus we need
$$x_{445}+2x_{454}-1/2=-1+x_{445}+2x_{454}+1/2\ge 0.$$

Next, we need to set up the inequalities for other faces.  A face of length at least $6$ may send up to $1/3$ per edge,
so let us add constraints
$$x_{abc}\le 1/3$$
for all $a,b,c\in\{4,5,6,{\ge\!7}\}$.
For $5$-faces, we will add inequalities for all possible types, depending on the degrees of incident vertices, whether
the edges are incident with $3$-faces, and in case they are, on the degrees of their vertices not incident with the $5$-face.
For example, for a $5$-face bounded by a cycle $v_1\ldots v_5$ of vertices of degree $4$, where each edge $v_iv_{i+1}$ is incident with
a triangle $g_i$, such that say $r(g_1)=r(g_2)=r(g_3)=0$, $g_4$ is incident with a vertex of degree $5$, and $g_5$ is incident with
a vertex of degree $6$, we get the inequality
$$1-3x_{444}-x_{445}-x_{446}\ge 0.$$

If the described linear program was feasible, a solution would give us amounts of charge for each rule.
However, this turns out not to be the case.  How far we are from being able to discharge everything?
Let us introduce another variable $\varepsilon$, and let us modify the inequalities for $5$-faces by adding $\varepsilon$ to their
left-hand sides; i.e., the last inequality becomes
$$1-3x_{444}-x_{445}-x_{446}+\varepsilon\ge 0.$$
Let us now minimize $\varepsilon$ subject to these constraints---it turns out the minimum is $2/3$.  That is, we can set up the amounts
transfered by the rules so that all vertices and faces have non-negative charge, except for $5$-faces which have charge at least $-2/3$.
Let us remark that since the sum of charges in the projective planar case is $-4$, this means the hypothetical minimal counterexample
we consider must have at least six $5$-faces.

What do we need to do to get closer to discharge everything?  Let us have a look at an optimum solution for the dual of
our linear program.  It has only two non-zero variables:
\begin{itemize}
\item[(i)] the one corresponding to the inequality $1-5x_{444}+\varepsilon\ge 0$
(which comes from a $5$-face sharing edge with five $3$-faces $g$ with $r(g)=0$) has value $1$, and
\item[(ii)] the one corresponding to the inequality $-1+3x_{444}\ge 0$ (which comes from a $3$-face incident only with vertices of degree $4$) has value $5/3$.
\end{itemize}
Indeed, the corresponding linear combination gives
$$\varepsilon-2/3=1-5x_{444}+\varepsilon+\frac{5}{3}(-1+3x_{444})\ge 0.$$
In order to decrease $\varepsilon$, we need either to alter the discharging rules (so that the inequalities corresponding to
the situations (i) or (ii) are changed) or to find a reducible configuration excluding (i) or (ii).  While there does not
seem much we can do in the case (i), the case (ii) is excluded by introducing the reducible configuration (c')---a $5$-face and a $3$-face
sharing an edge and only incident with vertices of degree $4$.

Therefore, we can remove inequalities for all $5$-face types matching (c') from the linear program.
Once we do so, the minimum value for $\varepsilon$ decreases to $1/4$, and in a solution to the dual linear program,
the non-zero variables correspond to the inequalities for the following configurations:
\begin{itemize}
\item a $3$-face $g$ with $r(g)=0$,
\item a $3$-face $g$ with $r(g)=1$ incident with a vertex of degree $5$,
\item a $5$-face $f$ with all incident vertices of degree 4, such that all edges of $f$ are shared with $3$-faces
incident with a vertex of degree $5$, and
\item a $5$-face $f$ incident with a vertex of degree $5$ and all other vertices of degree $4$,
such that all edges of $f$ are shared with $3$-faces whose vertices not incident with $f$ have degree $4$.
\end{itemize}
Among these, the last subcase can be excluded using the reducible configuration given by Lemma~\ref{lemma:no4cproj-redu}(c)\footnote{The next
to last case also forms a reducible configuration, which however turned out not to be useful in the end, and so we ignore it
for the purposes of this example.}.

After introducing the configuration from Lemma~\ref{lemma:no4cproj-redu}(c) and removing the matching inequalities,
the minimum value for $\varepsilon$ decreases to $1/9$, and the dual non-zero variables correspond to the following configurations:
\begin{itemize}
\item a $3$-face $g$ with $r(g)=0$,
\item a $3$-face $g$ with $r(g)=1$ incident with a vertex of degree $6$,
\item a $5$-face $f$ with all incident vertices of degree 4, such that all edges of $f$ are shared with $3$-faces
incident with a vertex of degree $6$, and
\item a $5$-face $f$ incident with a vertex $v$ of degree $6$ and all other vertices of degree $4$,
such that all edges of $f$ are shared with $3$-faces whose vertices not incident with $f$ have degree $4$.
\end{itemize}

In the last configuration, we might suspect the vertex $v$ of degree $6$ to have some extra charge that it could send to $f$.
Let us add a rule for this, represented by variable $x_{6l}\ge 0$.  More precisely, the rule is: let $v$ be a vertex of degree $6$
incident with a $5$-face $f$ such that all other vertices incident with $f$ have degree $4$, and let $e_1$ and $e_2$
be the edges in the boundary of $f$ incident with $v$.  For $i\in\{1,2\}$, if $f$ shares the edge $e_i$ with a $3$-face $g_i$
such that $r(g_i)=1$, then $v$ sends $x_{6l}$ to $f$.  Hence, the inequality for the last configuration becomes
$1-3x_{444}-2x_{464}+2x_{6l}+\varepsilon\ge 0$.  Of course, we also need to add inequalities ensuring that the final charge
of $6$-vertices is non-negative; e.g., a $6$-vertex incident with two $3$-faces sends $2/3$ to each of them, and may also
send four times the amount $x_{6l}$, giving the inequality $2/3-4x_{6l}\ge 0$.

For a $6$-vertex $z$ incident with three $3$-faces, we observe using Lemma~\ref{lemma:no4cproj-redu}(d) that
$z$ sends at most $2x_{6l}$ by this new rule.  However, it also sends all its charge to incident $3$-faces,
and thus we need to find the charge to cover $2x_{6l}$ somewhere else.  By Lemma~\ref{lemma:no4cproj-redu}(d),
we also see that $z$ is either incident with a $(\ge\!6)$-face, or with a $5$-face incident with more than one $(\ge\!5)$-vertex,
and it is natural for such a face to cover this charge.  Since $(\ge\!6)$-faces have at least $|f|/3$ units of charge available,
for them it suffices to add inequalities $1/3-x_{abc}-2x_{6l}\ge 0$ for all $a,b,c\in\{4,5,6,{\ge\!7}\}$.  For $5$-faces,
we just add the term $-2x_{6l}$ to relevant inequalities.  See Figure~\ref{fig:dischlp} for the final linear program.

\begin{figure}
\begin{framed}
Minimize $\varepsilon$ subject to the following constraints:
\begin{align*}
x_{6l}&\ge 0\\
2x_{6l}&\le 4/3\\
4x_{6l}&\le 2/3
\end{align*}
For all $a,b,c\in\{4,5,6,{\ge\!7}\}$:
\begin{align*}
x_{abc}&=x_{bac}\\
x_{abc}+2x_{6l}&\le 1/3\\
x_{abc}+x_{bca}+x_{cab}&\ge 1-\alpha(a)-\alpha(b)-\alpha(c),
\end{align*}
where $\alpha(4)=0$, $\alpha(5)=1/2$, $\alpha(6)=2/3$, and $\alpha({\ge\!7})=1$.

For all $a_1,\ldots,a_5\in \{4,5,6,{\ge\!7}\}$ and $c_1,\ldots, c_5\in \{0,4,5,6,{\ge\!7}\}$
with $a_5\ge a_1,\ldots, a_4$ and letting $a_6=a_1$, if $a_5=6$ and $a_1=\ldots=a_4$, then
\begin{align*}
\sum_{i: c_i\neq 0} x_{a_ia_{i+1}c_i}&\le 1+\varepsilon+|\{i\in\{4,5\}:c_i=4\}|\cdot x_{6l},
\end{align*}
else if at least two of $a_1$, \ldots, $a_5$ are greater than $4$, then
\begin{align*}
2|\{i:a_i=6\}|\cdot x_{6l}+\sum_{i: c_i\neq 0} x_{a_ia_{i+1}c_i}&\le 1+\varepsilon,
\end{align*}
else if $a_5=(\ge\!7)$, or $a_5=5$ and $c_4,c_5\neq 4$, or $a_5=4$ and none of $c_1,\ldots, c_5$ is $4$, then
\begin{align*}
\sum_{i: c_i\neq 0} x_{a_ia_{i+1}c_i}&\le 1+\varepsilon.
\end{align*}
\end{framed}

\caption{Linear program discussed in Subsection~\ref{ssec:dischlp}.}\label{fig:dischlp}
\end{figure}

With these changes, the minimum value of $\varepsilon$ becomes $0$, indicating that we managed to make the final charge
of vertices and faces non-negative.  We can now read off the amounts sent by the rules from the solution to the linear program.
Let us remark that linear programming solvers usually do not work in precise arithmetics, and thus one might be concerned
about the correctness of the proof obtained this way.  It is therefore necessary to verify that the discharging rules with
the amounts obtained from the linear program (after rounding to rational numbers) work either by hand, or by writing another program
to test that all vertices and faces are discharged to a non-negative value in exact arithmetics.

Let us remark that at the end of the preceding argument, we deviated slighty from the way we organized the discharging rules
in the proof of Theorem~\ref{thm:no4cproj}, adding a rule to send charge from or through a vertex of degree 6 instead of altering
the rules for sending charge to $3$-faces.  The reader is invited to find a more faithful formulation of the linear program
as an exercise.

\section{Coloring with forbidden cycle lengths}

Given Gr\"otzsch Theorem, it is natural to ask whether forbidding other cycle lengths is sufficient to
ensure that a planar graph is $3$-colorable.  It is easy to see that forbidding either $4$-cycles or $5$-cycles
by themselves is not sufficient.  Steinberg~\cite{conj-stein} conjectured that forbidding both $4$- and $5$-cycles
ensures that a planar graph is $3$-colorable, however this was recently disproved~\cite{steinfalse}.
On the other hand, Borodin et al.~\cite{bor47} proved that excluding cycles of lengths $4$ to $7$ is sufficient,
leaving only the case of excluded cycles of lengths $4$ to $6$ open.

Here, we consider the case of planar graphs with no cycles of lengths $4$ to $9$,
giving another example of a discharging argument.
This argument will also be used as a starting point in a presentation of an important trick in the following section.

\begin{theorem}\label{thm:no4to9}
Every planar graph with no cycles of lengths $4$ to $9$ is $3$-colorable.
\end{theorem}
\begin{proof}
For a contradiction, suppose that $G$ is a plane graph with no cycles of lengths $4$ to $9$ that is not $3$-colorable,
such that the number of vertices of $G$ is minimum.  Clearly, $G$ is connected and has minimum degree at least three.

Furthermore, $G$ is $2$-connected: otherwise, $G=G_1\cup G_2$ for proper induced subgraphs $G_1$ and $G_2$ intersecting
in a vertex $v\in V(G)$.  By the minimality of $G$, there exists a $3$-coloring $\varphi_i$ of $G_i$ for $i\in\{1,2\}$.
By permuting the colors in the coloring of $G_2$, we can assume that $\varphi_1(v)=\varphi_2(v)$.  However, then $\varphi_1$ together
with $\varphi_2$ give a $3$-coloring of $G$, which is a contradiction.

Hence, every face of $G$ is bounded by a cycle, and thus its length is either $3$ or at least $10$.
By Lemma~\ref{lemma:gallai1}, we conclude that every $10$-face of $G$ is
incident with a vertex of degree at least $4$.

Let us now assign charge $\initch(v)=\deg(v)-6$ to each vertex $v\in V(G)$ and $\initch(f)=2|f|-6$ to each face $f\in F(G)$.
By Lemma~\ref{lemma:initch}, the sum of these charges is negative, specifically $-12$.
Let us redistribute the charge according to the following rule.
\begin{itemize}
\item[(R1)] Let $v_1v_2v_3$ be a part of the boundary walk of a face $f$ of length at least $10$,
where $\deg(v_2)=3$.  If neither of the edges $v_1v_2$ and $v_2v_3$ is incident with a $3$-face,
then $f$ sends $1$ to $v_2$, otherwise $f$ sends $3/2$ to $v_2$.
\item[(R2)] Let $v_1v_2v_3$ be a part of the boundary walk of a face $f$ of length at least $10$,
where $\deg(v_2)\in\{4,5\}$.  If neither of the edges $v_1v_2$ and $v_2v_3$ is incident with a $3$-face,
then $f$ sends $1$ to $v_2$.  If exactly one of the edges $v_1v_2$ and $v_2v_3$ is incident with a $3$-face,
then $f$ sends $1/2$ to $v_2$.  If both $v_1v_2$ and $v_2v_3$ are incident with $3$-faces, then
$f$ sends $1$ to $v_2$.
\end{itemize}
Let $\finch$ denote the final charge after these rules are performed.
Let us argue that all vertices and faces have non-negative charges, which is a contradiction since the total amount of
charge is unchanged.

Let us first consider a vertex $v\in V(G)$.  If $\deg(v)\ge 6$, then $\finch(v)=\initch(v)\ge 0$.
If $\deg(v)=5$, then since $G$ does not contain $4$-cycles, there are at most two $3$-faces incident with $v$, and
thus $v$ receives at least $3\times 1/2$ by (R2) from the incident faces and $\finch(v)\ge \initch(v)+3/2>0$.
If $\deg(v)=4$, then $v$ receives $4\times 1$, $1+2\times 1/2$, or $2\times 1$ from the incident faces by (R2)
depending on the number of incident triangles, and $\finch(v)=\initch(v)+2=0$.  Finally, if $\deg(v)=3$, then $v$ receives
$3\times 1$ if $v$ is not incident with a $3$-face and $2\times 3/2$ otherwise, and $\finch(v)=\initch(v)+3=0$.

Let us now consider a face $f\in F(G)$.  If $|f|=3$, then $\finch(f)=\initch(f)=0$.  Hence, suppose that $|f|\ge 10$.
Note that $f$ sends at most $3/2$ to each incident vertex by (R1) and (R2), and thus
$$\finch(f)\ge \initch(f)-\frac{3}{2}|f|=\frac{|f|}{2}-6.$$
If $|f|\ge 12$, this implies that $\finch(f)\ge 0$.  If $|f|=11$, note that $f$ cannot send $3/2$ to all incident
vertices (otherwise all would be vertices of degree three incident with a $3$-face, which is not possible by parity).
Hence, $f$ sends at most $1$ to one incident vertex, and $\finch(f)\ge \initch(f)-10\times 3/2-1=0$.

Finally, suppose that $|f|=10$.  If $f$ sends $3/2$ to at most $8$ incident vertices, then
$\finch(f)\ge\initch(f)-8\times 3/2-2\times 1=0$. Recall that $f$ is incident with at least
one vertex of degree at least $4$, and thus we can assume that $f$ sends $3/2$ to $9$ incident
vertices.  Hence, we can label the vertices of the cycle bounding $f$ as $v_1v_2\ldots v_{10}$
so that $v_2$ is the unique vertex of degree at least $4$ incident with $f$ and the edges $v_2v_3$, $v_4v_5$,
\ldots, $v_{10}v_1$ are incident with triangles.  By (R2), $f$ sends at most $1/2$ to $v_2$, and thus
$\finch(f)=\ge\initch(f)-9\times 3/2-1/2=0$.
\end{proof}

\section{Trick: A Precolored Face}

We would now like to improve Theorem~\ref{thm:no4to9} by allowing $9$-faces in the graph.
With no further reducible configurations, the discharging phase of course fails for $9$-faces.
The worst case is a $9$-face $f$ bounded by a cycle $v_1v_2\ldots v_9$ with all
incident vertices of degree three and edges $v_1v_2$, $v_3v_4$, $v_5v_6$, and $v_7v_8$
incident with $3$-faces (for $i\in \{1,3,5,7,9\}$, let $x_i$ denote the neighbor of $v_i$
not incident with $f$); the final charge of such a face according to the discharging rules
(R1) and (R2) is $12-8\times 3/2-1=-1$.

One could wonder whether such a $9$-face does not
form a reducible configuration; however, just removing the incident vertices does not work---letting $G'=G-\{v_1,\ldots, v_9\}$,
a $3$-coloring of $G'$ in that $x_1$, $x_3$, \ldots, and $x_9$ happen to have the same color does not extend to
a $3$-coloring of $G$.  But, this is the only bad situation, as it is easy to see that if at least two different colors
appear on these vertices, then the coloring extends to $G$.  So, perhaps instead of considering $G'$, we could
consider the graph obtained from $G'$ by adding say the edge $x_1x_5$?  Any $3$-coloring of $G'+x_1x_5$ indeed extends to
a $3$-coloring of $G$, but adding the edge $x_1x_5$ might create a cycle of length $4$ to $8$, and thus
it might be the case that $G'+x_1x_5$ is not $3$-colorable without contradicting the minimality of the counterexample $G$
(in the final proof, we will actually use a more general reducible configuration, whose reduction however faces the
same difficulty).

The presence of such a cycle in $G'+x_1x_5$ would mean that $x_1$ and $x_5$ are joined by a path of length $3$ to $7$ in $G'$,
and this path together with the path $x_1v_2v_3v_4v_5x_5$ forms a cycle $C$ of length $8$ to $12$ in $G$.  It is also
easy to see that $C$ is a separating cycle (at least one vertex of $G$ appears both inside and outside of $C$).
If we were to show that such a separating cycle cannot appear in a minimal counterexample, this difficulty would go away.

A natural way of dealing with a separating cycle $C$ is to first color the part of $G$ outside of $C$, and then
extend the corresponding precoloring of $C$ to the subgraph of $G$ drawn inside $C$.
Of course, we need to prove that the last part is possible, forcing us to prove
a stronger statement with the precolored cycle.  This idea (which we will demonstrate momentarily, as well
as again in Section~\ref{sec:disch-grotzsch}) turns out to be very useful in many arguments to extend
the set of available reducible configurations.

Let us now proceed with the example.  Let us say that a plane graph $G$ is a \emph{counterexample}
if $G$ contains no cycles of lengths $4$ to $8$, its outer face is bounded
by a cycle $C$ of length at most $12$ and some $3$-coloring of $G[V(C)]$ does not extend to a $3$-coloring of $G$.
We aim to show that no counterexample exists; this indeed suffices to establish our claim.

\begin{lemma}\label{lemma:no4to8-exce}
Let $G$ be a plane graph with no cycles of lengths $4$ to $8$.  If $G$ is not $3$-colorable,
then there exists a counterexample with at most $|V(G)|$ vertices.
\end{lemma}
\begin{proof}
By Theorem~\ref{thm:no4to9}, $G$ contains a cycle $C$ of length $9$, which is necessarily induced.
Let $G'$ and $G''$ be the subgraphs of $G$ drawn inside and outside of $C$, respectively
(more precisely, let $G'$ be the subgraph of $G$ drawn in the closed disk $\Delta$ bounded by $C$, and let $G''$ be the
subgraph of $G$ drawn in the closure of the complement of $\Delta$).
Let $\psi$ be an arbitrary precoloring of $C$.  Since $G$ is not $3$-colorable,
$\psi$ does not extend to a $3$-coloring of either $G'$ or $G''$. By symmetry, we can assume the former,
and thus $G'$ is a counterexample.
\end{proof}

Let us start by showing some properties of a hypothetical minimal counterexample.

\begin{lemma}\label{lemma:no4to8-prop}
Let $G$ be a counterexample with $|V(G)|+|E(G)|$ the smallest possible.  Then $G$ is $2$-connected,
and the cycle $C$ bounding its outer face is induced.  Furthermore, if $K$ is a cycle
of length at most $12$ in $G$ distinct from $C$, then the open disk bounded by $K$ contains no
vertices, and if $uv$ and $uw$ are two chords of $K$ incident with the same vertex $u$,
then $vw\not\in E(G)$.
\end{lemma}
\begin{proof}
Let $\psi$ be a $3$-coloring of $G[V(C)]$ that does not extend to a $3$-coloring of $G$.
If $C$ were not induced and $e$ were a chord of $C$, then $\psi$ would not extend to a $3$-coloring of $G-e$
either and $G-e$ would be a counterexample contradicting the minimality of $G$.  Hence, $C$ is an induced
cycle.

If $G$ is not $2$-connected, then let $G_1$ and $G_2$ be proper induced subgraphs of $G$
such that $G=G_1\cup G_2$ and $G_1$ and $G_2$ intersect in at most one vertex, and $C\subseteq G_1$.
By the minimality of $G$ and Lemma~\ref{lemma:no4to8-exce}, we conclude that $\psi$ extends to a $3$-coloring $\varphi_1$ of $G_1$
and that $G_2$ has a $3$-coloring $\varphi_2$.  However, we can permute the colors in $\varphi_2$ so that $\varphi_1$ and $\varphi_2$
assign the same color to the vertex in the intersection of $G_1$ and $G_2$ (if any), and thus the combination of $\varphi_1$
and $\varphi_2$ would give a $3$-coloring of $G$ extending $\psi$.  This is a contradiction, showing that $G$ is $2$-connected.

Suppose that $K$ is a cycle of length at most $12$ in $G$ distinct from $C$ and the open disk $\Lambda$ bounded by $K$ contains some
vertex.  Let $G_1$ be the subgraph obtained from $G$ by removing all vertices drawn in $\Lambda$, and let $G_2$ be the subgraph
of $G$ drawn in the closure of $\Lambda$ (hence, $G_1$ and $G_2$ intersect in $K$ and the chords of $K$ drawn in $\Lambda$).
By the minimality of $G$, we conclude that $\psi$ extends to a $3$-coloring of $G_1$, and that the resulting $3$-coloring of $K$
extends to a $3$-coloring of $G_2$, which gives a $3$-coloring of $G$ that extends $\psi$.  This is a contradiction,
showing that $\Lambda$ contains no vertices.

Finally, consider chords $uv$ and $uw$ of $K$ drawn in $\Lambda$.  Note that the shortest cycle in $K+uv$ has length
at most $\frac{|K|+2}{2}\le 7$, and since $G$ does not contain cycles of lengths $4$ to $8$, it follows that $uv$ is incident
with a triangle $T$ in $K+uv$.  If $vw\in E(G)$, then $uvw$ would be a triangle distinct from $T$ (since $uw$ is a chord of $K$),
and the union of the two triangles would contain a $4$-cycle, which is a contradiction.  Hence, $vw\not\in E(G)$.
\end{proof}

\begin{figure}
\begin{center}
\begin{asy}
v[0]=(0,0);
v[1]=(1,0.5);
v[2]=(2,0.5);
v[3]=(3,0.5);
v[4]=(4,0.5);
v[5]=(5,0);
v[6]=(1.5,1.5);
v[7]=(3.5,1.5);

draw(v[0]--v[1]--v[2]--v[3]--v[4]--v[5]);
draw(v[1]--v[6]--v[2]);
draw(v[3]--v[7]--v[4]);

for (i = 1; i <= 4; ++i)
  vertex(v[i]);
vertex(v[0],black);
vertex(v[5],black);
vertex(v[6],black);
vertex(v[7],black);

label("$v_0$", v[0],S);
label("$v_1$", v[1],S);
label("$v_2$", v[2],S);
label("$v_3$", v[3],S);
label("$v_4$", v[4],S);
label("$v_5$", v[5],S);
label("$x$", v[6],N);
label("$y$", v[7],N);
\end{asy}
\end{center}
\caption{A tetrad.}\label{fig:tetrad}
\end{figure}

Next, we establish reducible configurations.  Let \emph{tetrad} denote a path of four vertices $v_1v_2v_3v_4$ of degree three
contained in a boundary of a face, such that edges $v_1v_2$ and $v_3v_4$ are incident with $3$-faces; see Figure~\ref{fig:tetrad}.
Among the reducible configurations, tetrads are the interesting ones, whose reducibility uses the precolored cycle trick.

\begin{lemma}\label{lemma:no4to8-redu}
Let $G$ be a counterexample with $|V(G)|+|E(G)|$ the smallest possible, and let $C$ be the cycle bounding the outer face of $G$.
Then $G$ contains none of the following.
\begin{itemize}
\item[\textrm{(a)}] A vertex of degree at most 2 not belonging to $C$.
\item[\textrm{(b)}] An even cycle of vertices of degree three vertex-disjoint with $C$.
\item[\textrm{(c)}] A tetrad vertex-disjoint with $C$.
\end{itemize}
\end{lemma}
\begin{proof}
The proof of reducibility of (a) is trivial, and the reducibility of (b) follows from Corollary~\ref{cor:gallai1}.
Hence, we only need to consider the configuration (c).  Let $\psi$ be a $3$-coloring of $C$ that does not extend to a $3$-coloring of $G$.
Let $v_0v_1v_2v_3v_4v_5$ be a path contained in a boundary of a face, such that $v_1v_2v_3v_4$ is a tetrad.
Let $x$ be the common neighbor of $v_1$ and $v_2$, and let $y$ be the common neighbor of $v_3$ and $v_4$.

Let $G'=G-\{v_1,v_2,v_3,v_4\}$.  If $G'$ contains a path $P$ of length at most $8$ between $v_0$ and $y$, then
$P$ together with the path $v_0v_1v_2v_3y$ is a cycle $K$ of length at most $12$ in $G$.  Let $\Lambda$ be the open disk bounded by
$K$, and note that either the edge $v_3v_4$ or the edges $v_1x$ and $v_2x$ are contained in $\Lambda$.  The former
is not possible, as otherwise $\Lambda$ would contain the vertex $v_4$, contradicting Lemma~\ref{lemma:no4to8-prop}.
The latter is not possible either, as then either $\Lambda$ would contain the vertex $x$ or $K$ would have chords
$v_1x$ and $v_2x$ with $v_1v_2\in E(G)$, again contradicting Lemma~\ref{lemma:no4to8-prop}.
Hence, $G'$ contains no such path $P$.  Let $d_0$ and $d_y$ denote the distance from $v_0$ and $y$ to $C$ in $G'$, respectively.
Since $|C|\le 12$, any two vertices of $C$ are joined by a path of length at most $6$ in $C$, and thus $d_0+d_y\ge 3$.

Let $G''$ be the graph obtained from $G'$ by identifying $v_0$ with $y$.  By the previous paragraph,
$G''$ does not contain any cycle of lengths $4$ to $8$.  Furthermore, since $d_0+d_y\ge 3$, at most one of $v_0$ and $y$ belongs
to $C$ and if one does, the other one has no neighbors in $C$, and thus $C$ is an induced cycle in $G''$.  By the minimality of $G$, there exists a $3$-coloring of $G''$ that extends $\psi$,
and thus there exists a $3$-coloring $\varphi$ of $G'$ that extends $\psi$ such that $\varphi(v_0)=\varphi(y)$.
Next, extend $\varphi$ greedily to $v_4$ and $v_3$ in order, and note that $\varphi(v_3)\neq \varphi(v_0)$.
If $\varphi(x)=\varphi(v_0)$, then we can extend $\varphi$ to $v_2$ and $v_1$ greedily in order,
and if $\varphi(x)=\varphi(v_3)$, then we can extend $\varphi$ to $v_1$ and $v_2$ greedily in order.
Finally, if $\varphi(v_0)\neq \varphi(x)\neq\varphi(v_3)$, then we can give $v_1$ the color $\varphi(v_3)$
and $v_2$ the color $\varphi(v_0)$.  In any case, we conclude that $\psi$ extends to a $3$-coloring of $G$, which is a contradiction.
\end{proof}

Note that the some configurations that are reducible in general cease to be reducible when intersecting
the precolored cycle $C$.  Consequently, the discharging phase of the argument may need to leave some negative charge on vertices of $C$.
This will be compensated by the fact that the sum of initial charges is not just negative, but actually at most $-12$.

Let $G$ be a plane graph with outer face bounded by a cycle $C$.  We say that a vertex $v$ is \emph{light} if $v\not\in V(C)$,
$v$ has degree three, and $v$ is incident with a triangle.

\begin{theorem}\label{thm:no4to8}
Every planar graph with no cycles of lengths $4$ to $8$ is $3$-colorable.
\end{theorem}
\begin{proof}
For a contradiction, suppose this is not the case, and thus by Lemma~\ref{lemma:no4to8-exce},
there exists a counterexample.  Let $G$ be a counterexample with $|V(G)|+|E(G)|$ the smallest possible.
By Lemma~\ref{lemma:no4to8-prop}, $G$ is $2$-connected (hence every face of $G$ is bounded by a cycle of length
either $3$ or at least $9$), and the outer face of $G$ is bounded by an induced cycle
$C$ of length at most $12$.  By Lemma~\ref{lemma:no4to8-redu}(a), vertices of $G$ not belonging to $C$ have degree at least three.

Let us now assign charge $\initch(v)=\deg(v)-6$ to each vertex $v\in V(G)$ and $\initch(f)=2|f|-6$ to each face $f\in F(G)$.
By Lemma~\ref{lemma:initch}, the sum of these charges is negative, specifically $-12$.
Let us redistribute the charge according to the following rule.
\begin{itemize}
\item[(R0)] Each non-outer face of length at least $9$ incident with a vertex $v\in V(C)$ sends $3/2$ to $v$ if $\deg(v)=2$ and $3/4$ to $v$ if $\deg(v)=3$.
\item[(R1)] Let $v_1v_2v_3$ be a part of the boundary walk of a face $f$ of length at least $9$,
where $\deg(v_2)=3$ and $v_2\not\in V(C)$.  If neither of the edges $v_1v_2$ and $v_2v_3$ is incident with a $3$-face,
then $f$ sends $1$ to $v_2$, otherwise $f$ sends $3/2$ to $v_2$.
\item[(R2)] Let $v_1v_2v_3$ be a part of the boundary walk of a face $f$ of length at least $9$,
where $\deg(v_2)\in\{4,5\}$ and $v_2\not\in V(C)$.  If neither of the edges $v_1v_2$ and $v_2v_3$ is incident with a $3$-face,
then $f$ sends $1$ to $v_2$.  If exactly one of the edges $v_1v_2$ and $v_2v_3$ is incident with a $3$-face,
then $f$ sends $1/2$ to $v_2$.  If both $v_1v_2$ and $v_2v_3$ are incident with $3$-faces, then
$f$ sends $1$ to $v_2$.
\end{itemize}
Let $\finch$ denote the final charge after these rules are performed.
Let us first argue that all vertices not in $C$ and all faces except for the outer one have non-negative charge.
If $v$ is a vertex not belonging to $V(C)$, then the rules (R1) and (R2) apply to it in exactly the same way as in the
proof of Theorem~\ref{thm:no4to9}, and thus $\finch(v)\ge 0$.

Let us consider a face $f\in F(G)$.  If $|f|=3$, then $\finch(f)=\initch(f)=0$.  Hence, suppose that $|f|\ge 9$.
Let $q$ denote the number of vertices of degree two
incident with $f$ and let $t$ denote the number of light vertices incident with $f$.  Suppose first that $q=0$.
If $|f|\ge 10$, then $\finch(f)\ge 0$ as in the proof of Theorem~\ref{thm:no4to9}.  If $|f|=9$, then note that $f$ is not incident
with five consecutive light vertices, as otherwise four of them would form a tetrad, contradicting Lemma~\ref{lemma:no4to8-redu}(c).
If $t\le 6$, then $\finch(f)\ge\initch(f)-6\times 3/2-3=0$.  If $t=7$, we can by symmetry and absence of tetrads disjoint from $C$
label the vertices of the cycle bounding $f$ as $v_1v_2\ldots v_9$ so that $v_5$ and $v_9$ are not light and edges $v_9v_1$,
$v_2v_3$, $v_4v_5$, $v_5v_6$, and $v_7v_8$ are shared with $3$-faces.  Since $v_8$ is light, edge $v_8v_9$ is not shared with a $3$-face.
But then $f$ sends at most $1/2$ to $v_9$ by (R2), and $\finch(f)\ge\initch(f)-7\times 3/2-1-1/2=0$.

Hence, we can assume that $q>0$.  Let $Q$ be a maximal subpath contained in the intersection of $C$ and the boundary of $f$
(since $G$ is $2$-connected, $Q$ is indeed a path, i.e., the endvertices of $Q$ are distinct).  Note that $f$ sends at most $3/4$
to each endvertex of $Q$ and $q+t\le |f|-2$.  Hence,
\begin{align*}
\finch(f)&\ge\initch(f)-2\times 3/4-(q+t)\times 3/2-(|f|-q-t-2)\times 1\\
&=|f|-(q+t+11)/2\ge(|f|-9)/2\ge 0.
\end{align*}

Let us now consider the final charge of vertices of $C$.  If $v\in V(C)$ has degree two, then note that the non-outer face incident
with $v$ does not have length $3$, since $C$ does not have chords; hence, $\finch(v)\ge\initch(v)+3/2=-5/2$ by (R0).
If $v\in V(C)$ has degree three, then $v$ is incident with at least one non-outer face of length greater than three, and
$\finch(v)\ge\initch(v)+3/4=-9/4$ by (R0).  If $v\in V(C)$ has degree at least four, then $\finch(v)=\initch(v)\ge -2$.
Let $n_2$ denote the number of vertices of $C$ of degree two.  Since $G$ is $2$-connected,
we have $n_2\le |C|-2$.  If $f_0$ is the outer face of $G$, then $\finch(f_0)=\initch(f_0)=2|C|-6$, and thus the sum of the final charges
of vertices and faces of $G$ is at least
\begin{align*}
\finch(f_0)+\sum_{v\in V(C)}\finch(v)&\ge 2|C|-6-n_2\times 5/2-(|C|-n_2)\times 9/4\\
&\ge 2|C|-6-|C|\times 5/2 + 2\times 1/4\\
&=-\frac{|C|+11}{2}\ge-\frac{23}{2}>-12.
\end{align*}
This is a contradiction, since the initial and final charges have the same sum $-12$.
\end{proof}

Theorem~\ref{thm:no4to8} can be improved---it suffices to exclude cycles of lengths $4$ to $7$, as shown
by Borodin et al.~\cite{bor47}.  The reader is invited to attempt to make the necessary changes to the
argument as an exercise (it is necessary to introduce two more reducible configurations at $8$-faces,
which should naturally follow from an attempt to discharge these faces).
 
\section{The Short Discharging Proof of Grotzsch's theorem (Zdenek's proof)}\label{sec:disch-grotzsch}

\subsection{How to find reducible configurations}\label{ssec:howto-redu}

\chapter{List Coloring}

% LP

\section{Overview of the Method}
\begin{itemize}
\item definitions and why useful
\item Even cycles are $2$-choosable; antimatching (Erdos, Rubin, Taylor); Brooks' for list?
\end{itemize}

\subsection{Brooks' Theorem and Gallai trees}\label{ssec-gallai}

\section{Book Proof: $5$-choosability of planar graphs}

\begin{itemize}
\item (What is the second proof?!)
\item Comments on choice of the assumptions (if we can come up with something profound on the topic :-).
\end{itemize}

\section{The Short List-Coloring Proof of Grotzsch's theorem}

using $|P|\le 6$ and $|P|\le 4$ if allowing one adjacent pair of lists of size two

\chapter{Recoloring?}

% ZD

\section{Overview of the Method}

\begin{itemize}
\item Example: 3-colorability of quadrangulations of torus that contain several disjoint even non-contactible cycles
(cut, $2$-color the resulting bipartite graph, recolor near one of the faces created by cutting).
\end{itemize}

\section{Kempe Chains: proof of $5$-color theorem}

\subsection{On the $4$-color-theorem}

\section{Proof of Vizing's theorem}

\part{Coloring Graphs on Surfaces}

\chapter{Motivation and Problems}

% LP

\section{Euler's formula for Surfaces and the Heawood bound}

\section{The Modern View}

\section{Algorithms, Locally Planar Graphs and Critical Graphs}

\section{Precolored Vertices, Crossings, and Many Colorings}

\chapter{Critical Graphs}

% ZD

\section{Definitions, Motivations and Examples}

\begin{itemize}
\item Definitions.
\item Motivation for bounding the size and the structure of critical graphs.
\begin{itemize}
\item Algorithmic remarks---complexity of finding a fixed subgraph; does not directly
give a coloring if one exists.
\end{itemize}
\item Examples: coloring embedded graphs with at least $6$ colors.
\end{itemize}

\section{A History of Results}

Survey of the bounds for size and desity, known full lists of critical graphs.

Key Idea: Criticality with respect to a subgraph.

\section{Bounding the Size of a Critical Graph}

Overview Methods to bound size of a critical graph:
\begin{itemize}
\item Reductions increasing a properly defined weight (example: linear bound on the size of graphs in disk
critical for $5$-coloring?).
\item Specific subgraphs at the precolored face coming from the nibbling method (example: quadratic (or linear?) bound
on the size of graphs in disk critical for $5$-list-coloring)?
\end{itemize}

\section{Increasing Weight via Discharging}

\section{Increasing Weight via Nibbling}

\chapter{Hyperbolicity}

% LP

\section{Weak hyperbolicity and its consequences.}

\subsection{Edgewidth of critical graphs. }
\subsection{Logarithmic radius and coloring algorithm.}
\subsection{Precoloring extension?}
\subsection{Number of colorings? }

\section{Proof of the Weak Hyperbolic Structure Theorem?}

\section{Strong hyperbolicity and the size of embedded critical graphs.}

\section{Locally Free}

Application to far apart (at least in plane). Prove the plane version via Steiner Trees.

\section{Overview of the known hyperbolic families and bounds.}


\chapter{Triangle-free Graphs and Quadrangulations}

% ZD

\section{Bounding the sum of lengths of $(\ge\!5)$-faces in $4$-critical triangle-free graphs (outline only).}
\section{Coloring quadrangulations and near-quadrangulations.}

\subsection{ Winding number.}
\begin{itemize}
\item The disk case, analysis of critical graphs via flows.
\end{itemize}

\subsection{The general case (statement + proof outline).}

\section{Applications of the theory:}
\subsection{Algorithmic (outline).}
\subsection{Graphs with high edgewidth.}
\subsection{Coloring with few uncolored vertices.}
\subsection{Distant anomalies, Havel's problem (outline).}

\part{Advanced Methods}

\chapter{Density of Critical Graphs and the Potential Method}

% LP

\section{Maximum average degree, degeneracy, embedded graphs.}
\section{Potential instead of mad.}
\section{Short Potential Proof of Brook's Theorem}
\section{The Short Potential Proof of Grotzsch's Theorem}
\section{Outline of general $k$?}
\section{Survey of other results.}

\chapter{Flows and Orientations}
\section{Definitions and Motivation}
\section{Flow-Coloring duality and Tutte's Flow Conjectures}
\section{The Short Flow Proof of Grotzsch's Theorem}
\section{Thomassen's proof of the weak $3$-flow conjecture}
\section{Thomassen-inspired proof of $6$-flow?}

\chapter{Probabilistic Methods}
\section{Probabilistic Tools: Local Lemma and Concentration Inequalities}
\section{Nibble Method: Short Proof of Kim's result}
\section{Outline of Johansson?}
\section{Reed's Conjecture}
\subsection{Density Lemma}
\subsection{Outline of Sparsity Lemma}

\part{Variants of Colorings}

\chapter{More on List Coloring?}

Maybe?

\section{Orientations? Paintability?}
\section{Ohba's?}

\chapter{Edge Coloring}

Maybe?

Do we want to have this chapter?  Or possibly we could refocus it on the
sparse setting (cubic graphs, planar graphs -- Seymour's conjecture)?

\section{Vizing Fans, Kierstead Paths}
\section{Tashkinov Trees and the Goldberg-Seymour Conjecture}
\section{List Coloring Conjecture for Bipartite Graphs (Galvin's Proof)}
\section{List Coloring Conjecture: Outline of Kahn's Proof?}

\chapter{Correspondence Coloring}

% LP

\section{Definitions and Motivation}

Definition and properties of correspondence coloring.

\section{Results on list coloring via correspondence coloring}

\begin{itemize}
\item More reducible configurations: $3$-list-coloring graphs without $4$-, \ldots, $8$-cycles.
\item Restoring uniformity in probabilistic arguments: Sparse graphs of bounded maximum degree.
\end{itemize}

\section{Old Results through the lens of Corr. Coloring}

Corr. coloring tied to average degree (Berhnetsyn's Proof)

\section{Open Questions}

Lift matching number? (i.e. special case of correspondence edge coloring)

\chapter{Circular Coloring and Acyclic Coloring?}

Maybe?

\part{Coloring and Structure}

\chapter{Excluding Minors}

Maybe?

Results on graphs avoiding a minor:


\section{Decomposition to two low tree-width graphs, $2$-approximation algorithm.}
\section{Hadwiger's conjecture and its relaxations}
(colors induce subgraphs of bounded maximum degree, maximum component size).
\section{Hajos' conjecture and counterexamples}

\chapter{Forbidding Subgraphs}

Maybe?

\section{Strong Perfect Graph Theorem}
\section{Gyarfas Conj + $\chi$-boundedness}
\section{Erdos-Hajnal}

\part{Open Problems}

\begin{itemize}
\item 4-colorability (surfaces, planar + edge, one crossing, \ldots).
\item Characterization of planar graphs with $\alpha(G)=n/4$, Eulerian triangulations with $\alpha(G)=n/3$.
\item $4$-colorability of Eulerian triangulations of surfaces.
\item $3$-colorability without $4$-, $5$-, $6$-cycles.
\item Improving the distance in Havel's conjecture, constants in the bounds on critical graphs.
\item Algorithmic: extending a precoloring of an arbitrarily long face in triangle-free planar graphs.
\item Vertex minors and $\chi$-boundedness.
\end{itemize}

\newpage
\pagestyle{plain}
\addcontentsline{toc}{chapter}{Index}
\printindex

\addcontentsline{toc}{chapter}{Bibliography}
\bibliographystyle{acm}
\bibliography{cb}

\end{document}
